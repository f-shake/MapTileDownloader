# Map Tile Downloader 地图瓦片下载器

一个用于下载地图瓦片的工具，支持多种地图服务，方便离线使用和数据采集。

![主界面1](C:\Users\autod\OneDrive\开发\MapTileDownloader\imgs\主界面1.jpg)

![主界面2](C:\Users\autod\OneDrive\开发\MapTileDownloader\imgs\主界面2.jpg)

## 功能特性

- 在线地图下载
    - 支持OSM标准或TMS标准的XYZ瓦片地图
    - 自定义下载区域和缩放级别
    - 支持断点续传
    - 支持多线程下载，下载速度快
- 本地地图查看和管理
    - 支持浏览本地地图
    - 支持查看本地地图信息
    - 使用Mbtiles标准的Sqlite数据库存储瓦片
    - 支持合并瓦片为大图
    - 支持发布HTTP服务

## 构建说明

1. 克隆本项目到本地：

   ```bash
   git clone https://github.com/f-shake/MapTileDownloader.git
   ```

2. 编辑`Directory.Build.props`，设置`FzLocal`为`F`，推荐设置`OutputToTempDir`为`F`

3. 打开解决方案并编译（需安装 .NET 环境），或执行Powershell脚本（`build*.ps1`）进行发布

4. 运行程序

## 使用说明

### 在线地图下载

1. 在“数据源”面板中，选择或新建数据源，按需进行配置。
2. 在“地图区域选择”面板，点击“在地图中选择”，然后在地图界面点击选择要下载的范围。左键新增一个节点，右键撤销，双击结束绘制。
3. 在“本地Mbtiles数据库”面板，选择想要保存到的位置。
4. 在“下载选项”面板中，选择下载的级别和并行线程数。
5. 点击“初始化”。
6. 点击“开始下载”。

### 本地数据查看与管理

在“本地Mbtiles数据库”面板，选择已有的Mbtiles数据库文件。右侧地图能够同步显示本地数据库中的地图，相关信息将在“基本信息”面板中显示。

- HTTP服务：将数据库中的瓦片通过HTTP服务进行发布，方便浏览器等前端工具调用。
- 拼接：将选定的区域，无缝拼接为一张大的图片
- 转换：在Mbtiles数据库格式的瓦片数据集，和文件形式的瓦片数据集，之间进行相互转换

## 许可证

本项目采用 MIT 许可证，详情请见 [LICENSE](./LICENSE)。

---

> 本项目仅供学习和研究使用，切勿用于商业用途。